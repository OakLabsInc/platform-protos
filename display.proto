syntax = "proto3";

import "google/protobuf/empty.proto";

package oak.platform;

// Configure displays (monitors, TVs, etc) that are connected to the host
//
// A "mode" is a string representing a resolution and framerate
// together, e.g. "1024x768@60.00". Because values for modes must be
// an exact text match in order to be recognized they should only be
// generated by this service. Users should not attempt to apply a
// mode to a display if it is not listed in that display's
// 'available_modes'.
//
// 'display_id' values come from the name of the physical port the
// display is plugged into e.g. "HDMI1" and "DP1".
service Display {

  // Lists displays, current configuration and supported configurations
  rpc Info (google.protobuf.Empty) returns (DisplayInformation) {}

  // Applies configuration
  rpc Configure (MultiDisplayConfiguration) returns (google.protobuf.Empty) {}
}

message DisplayInformation {
  MultiDisplayConfiguration current_configuration = 1;
  map<string,DisplayCapabilities> display_capabilities = 2;

  message DisplayCapabilities {
    string preferred_mode = 1;
    repeated string supported_modes = 2;
  }
}

message MultiDisplayConfiguration {
  uint32 dpi = 1;  // 0 -> 96
  map<string,DisplayConfiguration> displays = 2;
}

message DisplayConfiguration {
  bool off = 1;
  string mode = 2;
  Orientation orientation = 3;
}

enum Orientation {
  FORWARD_UPRIGHT = 0;
  FORWARD_LEFT = 1;
  FORWARD_RIGHT = 2;
  FORWARD_INVERTED = 3;
  BACKWARD_UPRIGHT = 4;
  BACKWARD_LEFT = 5;
  BACKWARD_RIGHT = 6;
  BACKWARD_INVERTED = 7;
}
